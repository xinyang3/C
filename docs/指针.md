

### 定义

指针是内存单元的地址，是引用，是数据单元的地址；

+ 指针变量

  类型名 * 变量名

  两个含义：一是存储单元表示的地址，二是指向存储单元的数据类型；

  ```c
  int  i = 10;
  // 将i的地址赋值给指针变量i_point
  // 在内存中 i_ponit是新开的内存空间
  int * i_pont = &i;
  // 二级指针类型
  & i_ponit // int **类型；字节数
  sizeof(i_point) 4? sizeof(char c)
  ```

+ 指针变量引用

  & 是引用， * 是取值，也叫解引用；&* i_point 相当于是 i_ponit；指针和地址是等价的

  ```c
  int p; int *p_point = &p;
  *p_point = 123;
  ```

+ 指针变量作为函数参数

  函数形参和实参之间是值传递，只是指针类型作为形参时，传递的时原变量的引用，对地址进行了复制，并赋值给了形参；

### 指针引用数组

+ 使用

  ```c
  int a[10] = {1, 2, 3, 4, 5};
  int * p;
  p = &a[0];
  等价于 p = a; 因为数组名就是指的数组首元素的地址；即 a == &a[0]
  ```

+ 指针运算

  p +1指向数组中下一个元素，p-1指向上一个元素

+ 指针引用数组元素

  ```c
  int * p = a;
  p[0]; *(p+1) 
  ```

  先看顺序再看优先级

  <https://blog.csdn.net/mylinchi/article/details/52926739>

  ```c
  int a[5] = { 1, 3, 5, 7, 9 };
  int *p;
  p = &a[0];
  int j;
  
  j = *p++;
  // 相当于 j = *p; p ++;
  //  j=1 *p =3
  
  j = (*p)++;
  // 相当于j = *p; (*p) ++  
  // a[0] = 2, *p = 2, j=1
  
  
  p = &a[1];
  j = *--p;
  // --p; j = *p;
  // a[0] = 1, *p = 1, j =1
  
  p = &a[0];
  j = p[0]++;
  // j = p[0]; p[0] ++ 
  // a[0] = 2, *p = 2; j =1;
  ```

+ 指针引用多维数组

  ```c
  int a[3][4] = {1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23};
  // a 是数组元素a[0]的地址，指向a[0]; a[0] 和 &a[0][0]相等
  // 是第0行的首地址
  ```

  ```c
  int *p; // 指向数组元素
  p = a[0]； // 0行0列地址即 &a[0][0], 
  ```

  指向一维数组的指针变量

  ```c
  // p指向类型是四个整型数的一维数组，指向一维数组的指针变量，p的长度是16个字节，基类型 int (*)[4]
  int (* p)[4];
  *(p+i) +j // 是i行j列元素的地址
  *(*（p+i）+j) // i行j列元素
  ```

  ![.\imgs\point_1.png](.\imgs\point_1.png)

+ 指针数组作为函数参数

  接受时用整型指针接受，第二种用一维数组的指针进行接受；

  ```c
  float score[3][4] = [{1, 2, 3, 4}, {}, {}]
  ```

  ![.\imgs\point_1.png](.\imgs\point_2.png)

### 指针引用字符串

```c
char * p = "hello";// 是把字符串常量的首地址赋值给指针变量
```

字符数组由若干元素组成，每个元素放一个字符，字符指针变量存放的的是地址；；

能对字符指针赋值，不能对字符数组名赋值；

初始化对数组分配若干内存单元，对字符指针变量分配一个内存单元；

指针变量的值可以改变，数组名代表固定的值，不能改变

### 指针的应用场景

+ 指针传递-函数传递

```c
// 还是值传递,i的地址被赋值给p
void a (int * p) {
    * p = 5; // p指向的是i的空间,通过将间接访问该百年i的值
}
void main () {
    int i = 1;
    a(&i); // 将i的地址传递
}
```

+ 指针的偏移-指针的加减

```c
int a[5] = {1, 2, 3, 4, 5};
int *p ;
p = a;
*(a + 1); // 相当于 a + sizeof(int) 相加了4个字节个数，地址上升了4个字节个数
&a[4]；// 第四个元素的地址
```

+ 指针运算


数组字符

```
chat c[] = "hello";
char * p;
p = c;
p[1] = 'H'; // c[1]变成了H，间接引用直接通过地址改变值
```

### 动态内存分配

```c
void * malloc(unsigned int size);
void * calloc(unsigned n, unsigned size);
void free(void *p);
void * realloc(void *p, unsigned int size);
```



